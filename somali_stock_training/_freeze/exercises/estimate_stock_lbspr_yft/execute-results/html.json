{
  "hash": "c1645d3cba22d610ce24c5f9cc1f7b79",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Stock Assessment  Using LBSPR\"\nsubtitle: \"Selected species of tuna and tuna-like fish in Somalia Water\"\nauthor: \"Rushingisha George, Masumbuko Semba, and Mathew Silas\"\nformat: html\ndate: \"2025-12-16\"\ndate-modified: today\ntoc: true\nlot: true\nlof: true\nembed-resources: true\nexecute: \n  echo: true\n  error: false\n  comment: \"\"\n  warning: false\n  message: false\n\ncode-fold: show\n\n---\n\n\n\n\n## Introduction\n\nThis document provides a step-by-step guide to performing a stock assessment simulation using the **Length-Based Spawning Potential Ratio (LBSPR)** method. LBSPR is a powerful technique for assessing the health of fish stocks, especially in data-limited situations where traditional age-based data is unavailable.\n\nWe will first simulate a fish population with known biological and fishery characteristics to understand how the LBSPR model works. This simulation will generate an expected length-frequency distribution, which can later be compared against real-world data collected from fisheries.\n\n## Setting Up the R Environment\n\nThe first step is to load the necessary R packages. Each package provides a specific set of tools required for our analysis.\n\n-   **`tidyverse`**: A collection of R packages for data manipulation and visualization.\n-   **`LBSPR`**: The core package for this analysis, containing all functions for the LBSPR method.\n-   **`TropFishR`**: A package for tropical fish stock assessment, which can be useful for related analyses.\n-   **`gt`**: For creating beautiful and presentation-ready tables.\n-   **`sizeMat`**: A package for estimating size at maturity, a key input for LBSPR.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load required libraries\nrequire(tidyverse) # Data manipulation and visualization\nrequire(tidyplots) # Easy plotting\nrequire(LBSPR)     # Length-Based Spawning Potential Ratio analysis\nrequire(sizeMat)   # Estimate size at maturity\nrequire(gt)        # Create presentation-ready tables\nrequire(TropFishR) # Tropical fisheries stock assessment methods\n```\n:::\n\n\n\n\n\n# Approach\n\n## Read data\n\nThe first step in any data analysis is to load the data. Our fisheries data, containing length, weight, species, and catch information, is stored in a CSV (Comma-Separated Values) file named `lw2.csv`. The following code chunk reads this file into our R environment and stores it in a data frame called `lw`. This data frame will be the foundation for all subsequent steps in our stock assessment.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlw = read_csv(\"lw2.csv\")\n```\n:::\n\n\n\n\n### Model Fish Group: Yellowfin Tuna\n\n**What we're doing:** We need to isolate data for a single species to conduct a stock-specific assessment. Here we filter for Yellowfin Tuna (YFT) from the larger dataset.\n\n**Why it matters:** Each fish species has different growth rates, maturity schedules, and fishing characteristics. By focusing on one species, we can accurately estimate its population parameters.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyft = lw |> \n    filter(fish_type_code == 'YFT')\n```\n:::\n\n\n\n\n### Explore Length-Weight Relationship\n\n**What we're doing:** We create a scatter plot showing how length and weight relate to each other for Yellowfin Tuna across different regions, with a fitted curve.\n\n**What to look for:** \n\n- A smooth, curved relationship indicates normal growth patterns\n- Outliers might represent data entry errors\n- Different regions may show different growth patterns\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyft |> \n  tidyplot(x = length_cm, y = weight_kg, color = region) |> \n  add_data_points() |> \n  add_curve_fit() |> \n  adjust_size(width = 2, height = 3, unit = 'in') |> \n  adjust_font(fontsize = 12) |> \n  adjust_legend_position(position = c(.35, .9)) |> \n  adjust_x_axis(title = 'Length (cm)') |> \n  adjust_y_axis(title = 'Weight (kg)') |> \n  remove_legend_title()\n```\n\n::: {.cell-output-display}\n![](estimate_stock_lbspr_yft_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n### Data Quality Filter\n\n**What we're doing:** Remove potentially problematic data points (fish from Berbera region and very small fish under 20 cm).\n\n**Why it matters:** \n\n- Small fish may be juveniles with different growth patterns\n- Regional data quality issues may affect estimates\n- Cleaner data = more reliable assessment results\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyft = lw |> \n    filter(fish_type_code == 'YFT' & !region == 'Berbera' & length_cm > 20)\n```\n:::\n\n\n\n\n### Maturity Classification\n\n**What we're doing:** Separate fish into two groups—mature (able to reproduce) and immature (not yet reproductive)—using statistical analysis of length and weight patterns.\n\n**Why it matters:** Maturity schedules are critical for LBSPR because:\n\n- The model needs to know at what size fish can first reproduce (L50)\n- Fishing immature fish reduces population recovery ability\n- Management often protects immature fish to ensure stock replenishment\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## Partitioning with Frequentist regression \nclassified_yft <- yft |> \n  classify_mature(\n    varNames = c(\"length_cm\", \"weight_kg\"),\n    varSex = NULL, \n    selectSex = NULL,\n    method = \"ld\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nall individuals were used in the analysis \n```\n\n\n:::\n\n```{.r .cell-code}\nclassified_yft\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNumber in juvenile group = 272 \n\nNumber in adult group = 98 \n\n-------------------------------------------------------- \n1) Linear regression for juveniles \n\nCall:\nglm(formula = y ~ x, data = juv)\n\nCoefficients:\n             Estimate Std. Error t value Pr(>|t|)    \n(Intercept) -9.184692   0.513034  -17.90   <2e-16 ***\nx            0.220284   0.007291   30.21   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for gaussian family taken to be 1.638605)\n\n    Null deviance: 1938.03  on 271  degrees of freedom\nResidual deviance:  442.42  on 270  degrees of freedom\nAIC: 910.22\n\nNumber of Fisher Scoring iterations: 2\n\n-------------------------------------------------------- \n2) Linear regression for adults \n\nCall:\nglm(formula = y ~ x, data = adt)\n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)    \n(Intercept) -69.6649     5.7059  -12.21   <2e-16 ***\nx             0.8608     0.0478   18.01   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for gaussian family taken to be 106.3829)\n\n    Null deviance: 44716  on 97  degrees of freedom\nResidual deviance: 10213  on 96  degrees of freedom\nAIC: 739.46\n\nNumber of Fisher Scoring iterations: 2\n\n-------------------------------------------------------- \n3) Difference between slopes (ANCOVA) \n               Estimate Std. Error    t value     Pr(>|t|)\n(Intercept)  -9.1846920 2.16246354  -4.247328 2.746951e-05\nx             0.2202842 0.03073368   7.167517 4.244089e-12\nmature      -60.4802433 3.68591106 -16.408492 9.644949e-46\nx:mature      0.6405282 0.03962059  16.166549 9.554434e-45\n[1] \"slopes are different\"\n```\n\n\n:::\n:::\n\n\n\n\n### Visualize Maturity Classification\n\n**What we're doing:** Plot the classified mature and immature fish to visually inspect the separation quality.\n\n**What to look for:** Clear separation between mature (upper right) and immature (lower left) fish groups indicates good classification.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nclassified_yft |> \n  plot(\n    xlab = 'Length (cm)', \n    ylab = 'Weight (kg)',\n    cex.main = 1.5,\n    cex.lab = 1.5,\n    cex.axis = 1.3, \n    las = 1\n  )\n```\n\n::: {.cell-output-display}\n![](estimate_stock_lbspr_yft_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n\n### Estimate L50 (Length at 50% Maturity)\n\n**What we're doing:** Calculate the length at which 50% of the population reaches maturity using a logistic regression fitted to 1000 bootstrap samples.\n\n**Why it matters:** L50 is a key input to LBSPR because it defines when fish become vulnerable to overfishing from a reproductive standpoint.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyft_ogive_fq <- classified_yft |> \n  morph_mature(\n    method = \"fq\", \n    niter = 1000\n)\n```\n:::\n\n\n\n\n### Display Maturity Parameters\n\n**What we're doing:** Create a professional table showing the estimated parameters of the maturity curve (A, B intercepts and L50).\n\n**What the columns mean:**\n\n- **A & B:** Parameters of the logistic maturity curve\n- **L50:** Length (cm) where 50% of fish are mature\n- **R²:** How well the curve fits the data (1.0 = perfect fit)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyft_ogive_fq |> \n    print() |> \n    as.data.frame() |> \n    as_tibble() |> \n    mutate(Freq = as.numeric(Freq)) |> \n    pivot_wider(names_from = Var1 , values_from  = Freq) |> \n    gt() |> \n    fmt_number(columns = everything(), decimals = 2) |> \n    fmt_missing(columns = everything(), missing_text = '-') |> \n    cols_label(\n        Var2 ~ 'Variables',\n        # A ~ 'A-Intercept',\n        # B ~ 'B-Slope',\n        L50 ~ md('L~50~'),\n        R2  ~ md('R^2^')\n    ) |>\n    tab_spanner(columns = c('A', 'B'), label = 'Ogive Parameters') |> \n    tab_options(data_row.padding = px(5), table.font.size = '12pt') |> \n    cols_width(\n        Var2 ~ px(200),\n        A ~ px(120),\n        B ~ px(70),\n        L50 ~ px(70),\n        R2 ~ px(70)\n    ) |> \n    tab_footnote(footnote = 'A for Intercept of the logistic curve.', locations = cells_column_labels(columns = 'A'))|> \n    tab_footnote(footnote = 'B for slope of the logistic curve.', locations = cells_column_labels(columns = 'B'))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nformula: Y = 1/1+exp-(A + B*X) \n```\n\n\n:::\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"oajhaqwzyg\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#oajhaqwzyg table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#oajhaqwzyg thead, #oajhaqwzyg tbody, #oajhaqwzyg tfoot, #oajhaqwzyg tr, #oajhaqwzyg td, #oajhaqwzyg th {\n  border-style: none;\n}\n\n#oajhaqwzyg p {\n  margin: 0;\n  padding: 0;\n}\n\n#oajhaqwzyg .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 12pt;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#oajhaqwzyg .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#oajhaqwzyg .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#oajhaqwzyg .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#oajhaqwzyg .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#oajhaqwzyg .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#oajhaqwzyg .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#oajhaqwzyg .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#oajhaqwzyg .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#oajhaqwzyg .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#oajhaqwzyg .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#oajhaqwzyg .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#oajhaqwzyg .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#oajhaqwzyg .gt_row {\n  padding-top: 5px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#oajhaqwzyg .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oajhaqwzyg .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#oajhaqwzyg .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#oajhaqwzyg .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#oajhaqwzyg .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oajhaqwzyg .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#oajhaqwzyg .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oajhaqwzyg .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#oajhaqwzyg .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oajhaqwzyg .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oajhaqwzyg .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oajhaqwzyg .gt_left {\n  text-align: left;\n}\n\n#oajhaqwzyg .gt_center {\n  text-align: center;\n}\n\n#oajhaqwzyg .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#oajhaqwzyg .gt_font_normal {\n  font-weight: normal;\n}\n\n#oajhaqwzyg .gt_font_bold {\n  font-weight: bold;\n}\n\n#oajhaqwzyg .gt_font_italic {\n  font-style: italic;\n}\n\n#oajhaqwzyg .gt_super {\n  font-size: 65%;\n}\n\n#oajhaqwzyg .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#oajhaqwzyg .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#oajhaqwzyg .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#oajhaqwzyg .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#oajhaqwzyg .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#oajhaqwzyg .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#oajhaqwzyg .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#oajhaqwzyg .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#oajhaqwzyg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" style=\"table-layout:fixed;width:0px;\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <colgroup>\n    <col style=\"width:200px;\"/>\n    <col style=\"width:120px;\"/>\n    <col style=\"width:70px;\"/>\n    <col style=\"width:70px;\"/>\n    <col style=\"width:70px;\"/>\n  </colgroup>\n  <thead>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Var2\">Variables</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"Ogive Parameters\">\n        <div class=\"gt_column_spanner\">Ogive Parameters</div>\n      </th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"L50\"><span data-qmd-base64=\"TH41MH4=\"><span class='gt_from_md'>L<sub>50</sub></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"R2\"><span data-qmd-base64=\"Ul4yXg==\"><span class='gt_from_md'>R<sup>2</sup></span></span></th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"A\">A<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"B\">B<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>2</sup></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Var2\" class=\"gt_row gt_center\">Original</td>\n<td headers=\"A\" class=\"gt_row gt_right\">−43.36</td>\n<td headers=\"B\" class=\"gt_row gt_right\">0.47</td>\n<td headers=\"L50\" class=\"gt_row gt_right\">91.53</td>\n<td headers=\"R2\" class=\"gt_row gt_right\">0.94</td></tr>\n    <tr><td headers=\"Var2\" class=\"gt_row gt_center\">Bootstrap (Median)</td>\n<td headers=\"A\" class=\"gt_row gt_right\">−44.88</td>\n<td headers=\"B\" class=\"gt_row gt_right\">0.49</td>\n<td headers=\"L50\" class=\"gt_row gt_right\">91.51</td>\n<td headers=\"R2\" class=\"gt_row gt_right\">-</td></tr>\n  </tbody>\n  <tfoot>\n    <tr class=\"gt_footnotes\">\n      <td class=\"gt_footnote\" colspan=\"5\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span> A for Intercept of the logistic curve.</td>\n    </tr>\n    <tr class=\"gt_footnotes\">\n      <td class=\"gt_footnote\" colspan=\"5\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>2</sup></span> B for slope of the logistic curve.</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n### Plot Maturity Curve\n\n**What we're doing:** Visualize the maturity ogive—the smooth curve showing the proportion of mature fish at each length.\n\n**What it shows:** \n\n- At lengths below L50, few fish are mature\n- At lengths above L50, most fish are mature\n- The curve typically follows an S-shape (logistic pattern)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyft_ogive_fq |> \n    plot(\n    main = 'L50 of Yellowfin Tuna',\n    xlab = 'Length (cm)', \n    ylab = 'Proportion Mature',\n    cex.main = 1.5,\n    cex.lab = 1.5,\n    cex.axis = 1.3, \n    las = 1,\n    onlyOgive = TRUE\n)\n```\n\n::: {.cell-output-display}\n![](estimate_stock_lbspr_yft_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSize at morphometric maturity = 91.5 \nConfidence intervals = 89.8 - 93.4 \nRsquare = 0.94\n```\n\n\n:::\n:::\n\n\n\n\n### Combine Maturity and Ogive Visualizations\n\n**What we're doing:** Display both the classified data and the fitted maturity curve side-by-side for comprehensive assessment quality review.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow = c(1,2))\n\nclassified_yft |> \n  plot(\n    xlab = 'Length (cm)', \n    ylab = 'Weight (kg)',\n    cex.main = 1.5,\n    cex.lab = 1.5,\n    cex.axis = 1.3, \n    las = 1\n  )\n\nyft_ogive_fq |> \n    plot(\n    xlab = 'Length (cm)', \n    ylab = 'Proportion Mature',\n    cex.main = 1.5,\n    cex.lab = 1.5,\n    cex.axis = 1.3, \n    las = 1,\n    onlyOgive = TRUE\n)\n```\n\n::: {.cell-output-display}\n![](estimate_stock_lbspr_yft_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSize at morphometric maturity = 91.5 \nConfidence intervals = 89.8 - 93.4 \nRsquare = 0.94\n```\n\n\n:::\n:::\n\n\n\n\n### Prepare Length-Frequency Data (LFQ)\n\n**What we're doing:** Convert raw individual fish measurements into length-frequency data by binning them into size classes. We also apply smoothing techniques (moving average, square root transformation).\n\n**Why it matters:** \n\n- LBSPR needs data organized by size classes, not individual fish\n- Smoothing reduces noise from sampling variation\n- This format is standard for length-based assessment methods\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow = c(1,1))\n\naa = yft |> \n   mutate(\n    date = lubridate::make_date(year = 2024, month = month(date_dd_mm_yy), day = 15 )\n    )\n\nlfq_mod = aa |> \n  TropFishR::lfqCreate(\n    Lname = \"length_cm\", \n    Dname = \"date\", \n    bin_size = 2, \n    species = \"Yellowfin\", \n    length_unit = \"cm\", \n    aggregate_dates = TRUE\n    ) |> \n  TropFishR::lfqModify(\n    bin_size = 4, \n    aggregate = \"month\", \n    vectorise_catch = FALSE\n    ) |> \n  TropFishR::lfqRestructure(\n    MA = 9, \n    addl.sqrt = TRUE\n    ) \n\nlfq_mod |> \n    plot(        \n        Fname = \"catch\", \n        las = 1,\n        ylab = 'Length classes (cm)', \n        cex.main = 1.5,\n        cex.lab = 1.5,\n        cex.axis = 1.3\n    )\n```\n\n::: {.cell-output-display}\n![](estimate_stock_lbspr_yft_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n\n### Powell-Wetherall Method: Estimate Linf and Z\n\n**What we're doing:** Estimate two key parameters:\n\n- **Linf (L∞):** The theoretical maximum length the fish can reach\n- **Z (Total Mortality):** The combined death rate from fishing and natural causes\n\n**Why it matters:** These are fundamental biological parameters needed for all subsequent growth and mortality calculations.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow = c(1,1))\n\nres_PW <- powell_wetherall(param = lfq_mod,\n                           catch_columns = 1:ncol(lfq_mod$catch),\n                           reg_int = c(20,30)\n                           )\n```\n\n::: {.cell-output-display}\n![](estimate_stock_lbspr_yft_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# show results\npaste0(\"Linf = \", round(res_PW$Linf_est, 2), \" ± \", round(res_PW$se_Linf))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Linf = 175.29 ± 13\"\n```\n\n\n:::\n:::\n\n\n\n\n### ELEFAN: Estimate Growth Parameters (K)\n\n**What we're doing:** Use Electronic LEngth Frequency ANalysis (ELEFAN) with K-Scan to estimate the growth coefficient (K) from the length-frequency data.\n\n**Why it matters:** \n\n- K describes how quickly fish grow toward their maximum size\n- Combined with Linf, it defines the von Bertalanffy growth curve\n- Essential input for age calculations in LBSPR\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ELEFAN with K-Scan\nres_KScan <- ELEFAN(lfq_mod, Linf_fix = res_PW$Linf_est,\n                    MA = 5, addl.sqrt = TRUE, hide.progressbar = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOptimisation procuedure of ELEFAN is running. \nThis will take some time. \nThe process bar will inform you about the process of the calculations.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](estimate_stock_lbspr_yft_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# show results\nres_KScan$par$Linf\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 175.2877\n```\n\n\n:::\n\n```{.r .cell-code}\nres_KScan$par$K\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.23\n```\n\n\n:::\n:::\n\n\n\n\n### Length-Converted Catch Curve: Estimate F, Z, and Selectivity\n\n**What we're doing:** Analyze the size structure of the catch to estimate:\n\n- **Z:** Total mortality rate (natural + fishing)\n- **F:** Fishing mortality rate (F = Z - M)\n- **L50, L95:** Lengths at which 50% and 95% of fish are selected by the fishing gear\n\n**Why it matters:** \n\n- F tells us how heavily the stock is being fished\n- Selectivity (L50, L95) shows whether the gear targets juvenile or adult fish\n- Together these help us understand current fishing pressure\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow = c(2,1))\n\nab = lfq_mod |> \n  TropFishR::lfqModify(vectorise_catch = TRUE, \n                       bin_size = 4,\n                       year = 2024) \n\nab$Linf = res_KScan$par$Linf\nab$K = res_KScan$par$K\n\ncatch.converted = ab |> \n  TropFishR::catchCurve(reg_int = c(40, 178), \n                        calc_ogive = TRUE,\n                        auto = TRUE, \n                        plot = TRUE)\n```\n\n::: {.cell-output-display}\n![](estimate_stock_lbspr_yft_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n\n```{.r .cell-code}\ncatch.converted$F\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNULL\n```\n\n\n:::\n:::\n\n\n\n\n### Estimate Natural Mortality Rate (M)\n\n**What we're doing:** \nCalculate the natural mortality rate (M)—the death rate from predators, disease, and aging—using an empirical equation based on growth parameters.\n\n**Why it matters:** \n\n- M is needed to separate fishing deaths (F) from natural deaths\n- Equation: F = Z - M\n- Different species have different natural mortality based on their life history\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# estimation of M\nMs <- TropFishR::M_empirical(Linf = res_KScan$par$Linf, \n                             K_l = res_KScan$par$K, \n                             method = \"Then_growth\")\n\nlfq_mod$M <- as.numeric(Ms)\n```\n:::\n\n\n\n\n### Assemble LBSPR Input Parameters\n\n**What we're doing:** \n\nCompile all the biological and exploitation parameters we've estimated into variables ready for the LBSPR model.\n\n**Parameter groups:**\n\n- **Biological:** Growth (Linf), maturity (L50, L95), natural mortality (M/K ratio)\n- **Exploitation:** Gear selectivity (SL50, SL95), fishing pressure (F/M)\n- **Size classes:** Bins for the analysis (typically 5 cm intervals)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## biological parameters\nSpecies = \"Yellowfin\"\nLinf = res_KScan$par$Linf\nL50 = yft_ogive_fq$out |> filter(between(fitted, 0.49, 0.60)) |> slice(1) |> pull(x)\nL95 = yft_ogive_fq$out |> filter(between(fitted, 0.938, 0.9510)) |> slice(1) |> pull(x)\nMK = lfq_mod$M / res_KScan$par$K\n\n## Exploitation parameters\nSL50 = catch.converted$L50\nSL95 = catch.converted$L95\nFM = catch.converted$FM |> as.numeric() |> abs()\n\n## Size classes\nBinWidth = 5\nBinMin = yft |> pull(length_cm) |> min()\nBinMax = yft |> pull(length_cm) |> max()\nL_units = \"cm\"\n```\n:::\n\n\n\n\n### Create LBSPR Parameter Object\n\n**What we're doing:** \nCreate an empty LB_pars object (a special R data structure) to hold all LBSPR model parameters.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyftPars <- new(\"LB_pars\")\n```\n:::\n\n\n\n\n### Populate LBSPR Parameters\n\n**What we're doing:** \nFill the LB_pars object with all the parameters we've estimated. We use FM = 0.3 as a starting point for the model to refine through fitting.\n\n**Note:** Some parameters use defaults if not specified; the model will estimate F/M to match the observed data.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## biological parameters\nyftPars@Species = \"Yellowfin\"\nyftPars@Linf = res_KScan$par$Linf\nyftPars@L50 = yft_ogive_fq$out |> filter(between(fitted, 0.49, 0.60)) |> slice(1) |> pull(x)\nyftPars@L95 = yft_ogive_fq$out |> filter(between(fitted, 0.938, 0.9510)) |> slice(1) |> pull(x)\nyftPars@MK = lfq_mod$M / res_KScan$par$K\n\n## Exploitation parameters\nyftPars@SL50 = catch.converted$L50\nyftPars@SL95 = catch.converted$L95\nyftPars@FM = 0.3  # Initial value; model will estimate based on data\n\n## Size classes\nyftPars@BinWidth = 5\nyftPars@BinMin = yft |> pull(length_cm) |> min()\nyftPars@BinMax = 190\nyftPars@L_units = \"cm\"\n```\n:::\n\n\n\n\n### Run the LBSPR Simulation\n\n**What we're doing:** \nExecute the LBSPR model to:\n\n1. Simulate an expected size distribution based on our parameters\n2. Compare it to observed catch data\n3. Estimate current fishing pressure (F/M) and stock status (SPR)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyftSim = yftPars |> LBSPRsim()\n```\n:::\n\n\n\n\n### Visualize LBSPR Results\n\n**What we're doing:** Create four diagnostic plots showing:\n\n- **Top-left:** Expected catch size structure vs. unfished population\n- **Top-right:** Maturity and selectivity curves overlaid\n- **Bottom-left:** von Bertalanffy growth curve\n- **Bottom-right:** Stock status relative to reference points\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nyftSim |> \n  plotSim(lf.type = \"pop\")\n```\n\n::: {.cell-output-display}\n![Estimated a) the expected (equilibrium) size structure of the catch and the expected unfished size structure of the vulnerable population, b) the maturity and selectivity-at-length curves, c) the von Bertalanffy growth curve with relative age, and d) the SPR and relative yield curves as a function of relative fishing mortality.](estimate_stock_lbspr_yft_files/figure-html/fig-stock-b0-1.png){#fig-stock-b0 width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npar(mfrow = c(1,1))\n\nyftSim  |>  plotSim(type = \"growth\")\nyftSim  |>  plotSim(type = \"len.freq\")\nyftSim  |>  plotSim(type = \"yield.curve\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nyftmetrics = tibble(\n    Linf = yftSim@Linf, \n    Z = catch.converted$Z, \n    K = catch.converted$K, \n    t50 = catch.converted$t50, \n    t95 = catch.converted$t95,   \n    L50 = yftSim@L50, \n    L95 = yftSim@L95, \n    \n    SL50 = yftSim@SL50, \n    SL95 = yftSim@SL95,\n    MK = yftSim@MK,\n    FM = yftSim@FM,\n    \n    SPR = yftSim@SPR, \n    Yield = yftSim@Yield, \n    YPR = yftSim@YPR, \n    SSB = yftSim@SSB, \n    SSB0 = yftSim@SSB0\n    )  |>  \n  mutate(across(is.numeric, round, 2)) |> \n  pivot_longer(cols =1:16) |> \n  mutate(Parameters = rep(c('Biological', \"Exploitation\", \"Stock\"), c(7,4,5)), .before = name)\n```\n:::\n\n::: {.cell}\n\n:::\n\n::: {#tbl-metrics .cell tbl-cap='Stock assessment reference points with descriptions and metric values of yellowfin tuna'}\n\n```{.r .cell-code}\ntuna_metrics_clean = tuna_metrics |> rename(name = 1) |> dplyr::select(-value)\n\nyftmetrics |> \n    left_join(tuna_metrics_clean, by = \"name\") |> \n    dplyr::select(1:4) |> \n  gt(groupname_col = 'Parameters') |> \n  cols_label(\n    name = \"Metric\",\n    value = \"Value\",\n    measure = \"What It Measures\"\n  ) |> \n  fmt_number(\n    columns = value,\n    decimals = 2\n  ) |> \n  tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_column_labels()\n  ) |> \n  tab_style(\n    style = cell_fill(color = \"#e8f4f8\"),\n    locations = cells_body(rows = Parameters %in% c(\"Biological\"))\n  ) |> \n  tab_style(\n    style = cell_fill(color = \"#fff3cd\"),\n    locations = cells_body(rows = Parameters %in% c(\"Exploitation\"))\n  ) |> \n  tab_style(\n    style = cell_fill(color = \"#aef6eaff\"),\n    locations = cells_body(rows = Parameters %in% c(\"Stock\"))\n  ) |> \n  tab_options(\n    table.font.size = 12,\n    column_labels.font.weight = \"bold\",\n    row_group.font.weight = \"bold\"\n  ) |> \n  cols_width(\n    name ~ px(50),\n    value ~ px(150),\n    measure ~ px(400)\n  ) |> \n  tab_source_note(\n    source_note = \"Note: These metrics were computed from yellowfin tuna data of Somalia\"\n  )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"oxliexlqvq\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#oxliexlqvq table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#oxliexlqvq thead, #oxliexlqvq tbody, #oxliexlqvq tfoot, #oxliexlqvq tr, #oxliexlqvq td, #oxliexlqvq th {\n  border-style: none;\n}\n\n#oxliexlqvq p {\n  margin: 0;\n  padding: 0;\n}\n\n#oxliexlqvq .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 12px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#oxliexlqvq .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#oxliexlqvq .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#oxliexlqvq .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: bold;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#oxliexlqvq .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: bold;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#oxliexlqvq .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#oxliexlqvq .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#oxliexlqvq .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#oxliexlqvq .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#oxliexlqvq .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: bold;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#oxliexlqvq .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: bold;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#oxliexlqvq .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#oxliexlqvq .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#oxliexlqvq .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#oxliexlqvq .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxliexlqvq .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#oxliexlqvq .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#oxliexlqvq .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#oxliexlqvq .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxliexlqvq .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#oxliexlqvq .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxliexlqvq .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#oxliexlqvq .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxliexlqvq .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oxliexlqvq .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxliexlqvq .gt_left {\n  text-align: left;\n}\n\n#oxliexlqvq .gt_center {\n  text-align: center;\n}\n\n#oxliexlqvq .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#oxliexlqvq .gt_font_normal {\n  font-weight: normal;\n}\n\n#oxliexlqvq .gt_font_bold {\n  font-weight: bold;\n}\n\n#oxliexlqvq .gt_font_italic {\n  font-style: italic;\n}\n\n#oxliexlqvq .gt_super {\n  font-size: 65%;\n}\n\n#oxliexlqvq .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#oxliexlqvq .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#oxliexlqvq .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#oxliexlqvq .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#oxliexlqvq .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#oxliexlqvq .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#oxliexlqvq .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#oxliexlqvq .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#oxliexlqvq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" style=\"table-layout:fixed;width:0px;\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <colgroup>\n    <col style=\"width:50px;\"/>\n    <col style=\"width:150px;\"/>\n    <col style=\"width:400px;\"/>\n  </colgroup>\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"name\">Metric</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"value\">Value</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"font-weight: bold;\" scope=\"col\" id=\"measure\">What It Measures</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"3\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Biological\">Biological</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Biological  name\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">Linf</td>\n<td headers=\"Biological  value\" class=\"gt_row gt_right\" style=\"background-color: #E8F4F8;\">175.29</td>\n<td headers=\"Biological  measure\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">Asymptotic Length - Theoretical maximum length (cm) the species can reach</td></tr>\n    <tr><td headers=\"Biological  name\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">Z</td>\n<td headers=\"Biological  value\" class=\"gt_row gt_right\" style=\"background-color: #E8F4F8;\">0.54</td>\n<td headers=\"Biological  measure\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">Total Mortality Rate - Combined rate of all fish deaths (natural + fishing)</td></tr>\n    <tr><td headers=\"Biological  name\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">K</td>\n<td headers=\"Biological  value\" class=\"gt_row gt_right\" style=\"background-color: #E8F4F8;\">0.23</td>\n<td headers=\"Biological  measure\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">Growth Coefficient - How quickly fish approach their maximum size</td></tr>\n    <tr><td headers=\"Biological  name\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">t50</td>\n<td headers=\"Biological  value\" class=\"gt_row gt_right\" style=\"background-color: #E8F4F8;\">1.55</td>\n<td headers=\"Biological  measure\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">Age at 50% Maturity - Average age (years) when half the fish can reproduce</td></tr>\n    <tr><td headers=\"Biological  name\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">t95</td>\n<td headers=\"Biological  value\" class=\"gt_row gt_right\" style=\"background-color: #E8F4F8;\">1.80</td>\n<td headers=\"Biological  measure\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">Age at 95% Maturity - Age when nearly all fish are sexually mature</td></tr>\n    <tr><td headers=\"Biological  name\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">L50</td>\n<td headers=\"Biological  value\" class=\"gt_row gt_right\" style=\"background-color: #E8F4F8;\">92.00</td>\n<td headers=\"Biological  measure\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">Length at 50% Maturity - Size (cm) when half the population can breed</td></tr>\n    <tr><td headers=\"Biological  name\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">L95</td>\n<td headers=\"Biological  value\" class=\"gt_row gt_right\" style=\"background-color: #E8F4F8;\">97.00</td>\n<td headers=\"Biological  measure\" class=\"gt_row gt_left\" style=\"background-color: #E8F4F8;\">Length at 95% Maturity - Size when almost all fish are mature breeders</td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"3\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Exploitation\">Exploitation</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Exploitation  name\" class=\"gt_row gt_left\" style=\"background-color: #FFF3CD;\">SL50</td>\n<td headers=\"Exploitation  value\" class=\"gt_row gt_right\" style=\"background-color: #FFF3CD;\">52.68</td>\n<td headers=\"Exploitation  measure\" class=\"gt_row gt_left\" style=\"background-color: #FFF3CD;\">Selectivity Length 50% - Size when fishing gear catches 50% of fish at that length</td></tr>\n    <tr><td headers=\"Exploitation  name\" class=\"gt_row gt_left\" style=\"background-color: #FFF3CD;\">SL95</td>\n<td headers=\"Exploitation  value\" class=\"gt_row gt_right\" style=\"background-color: #FFF3CD;\">59.43</td>\n<td headers=\"Exploitation  measure\" class=\"gt_row gt_left\" style=\"background-color: #FFF3CD;\">Selectivity Length 95% - Size when gear catches 95% of fish encountered</td></tr>\n    <tr><td headers=\"Exploitation  name\" class=\"gt_row gt_left\" style=\"background-color: #FFF3CD;\">MK</td>\n<td headers=\"Exploitation  value\" class=\"gt_row gt_right\" style=\"background-color: #FFF3CD;\">1.11</td>\n<td headers=\"Exploitation  measure\" class=\"gt_row gt_left\" style=\"background-color: #FFF3CD;\">NA</td></tr>\n    <tr><td headers=\"Exploitation  name\" class=\"gt_row gt_left\" style=\"background-color: #FFF3CD;\">FM</td>\n<td headers=\"Exploitation  value\" class=\"gt_row gt_right\" style=\"background-color: #FFF3CD;\">0.30</td>\n<td headers=\"Exploitation  measure\" class=\"gt_row gt_left\" style=\"background-color: #FFF3CD;\">NA</td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"3\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Stock\">Stock</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Stock  name\" class=\"gt_row gt_left\" style=\"background-color: #AEF6EA;\">SPR</td>\n<td headers=\"Stock  value\" class=\"gt_row gt_right\" style=\"background-color: #AEF6EA;\">0.62</td>\n<td headers=\"Stock  measure\" class=\"gt_row gt_left\" style=\"background-color: #AEF6EA;\">Spawning Potential Ratio - Current breeding capacity vs unfished stock</td></tr>\n    <tr><td headers=\"Stock  name\" class=\"gt_row gt_left\" style=\"background-color: #AEF6EA;\">Yield</td>\n<td headers=\"Stock  value\" class=\"gt_row gt_right\" style=\"background-color: #AEF6EA;\">1,851,390,864.09</td>\n<td headers=\"Stock  measure\" class=\"gt_row gt_left\" style=\"background-color: #AEF6EA;\">Total Yield - Total weight of fish caught from the stock</td></tr>\n    <tr><td headers=\"Stock  name\" class=\"gt_row gt_left\" style=\"background-color: #AEF6EA;\">YPR</td>\n<td headers=\"Stock  value\" class=\"gt_row gt_right\" style=\"background-color: #AEF6EA;\">200,017.89</td>\n<td headers=\"Stock  measure\" class=\"gt_row gt_left\" style=\"background-color: #AEF6EA;\">Yield Per Recruit - Average catch obtained from each young fish over its lifetime</td></tr>\n    <tr><td headers=\"Stock  name\" class=\"gt_row gt_left\" style=\"background-color: #AEF6EA;\">SSB</td>\n<td headers=\"Stock  value\" class=\"gt_row gt_right\" style=\"background-color: #AEF6EA;\">5,423,342,002.94</td>\n<td headers=\"Stock  measure\" class=\"gt_row gt_left\" style=\"background-color: #AEF6EA;\">Spawning Stock Biomass - Total weight of all breeding adults in the population</td></tr>\n    <tr><td headers=\"Stock  name\" class=\"gt_row gt_left\" style=\"background-color: #AEF6EA;\">SSB0</td>\n<td headers=\"Stock  value\" class=\"gt_row gt_right\" style=\"background-color: #AEF6EA;\">949,127.25</td>\n<td headers=\"Stock  measure\" class=\"gt_row gt_left\" style=\"background-color: #AEF6EA;\">Unfished SSB - Theoretical spawning biomass with no fishing</td></tr>\n  </tbody>\n  <tfoot>\n    <tr class=\"gt_sourcenotes\">\n      <td class=\"gt_sourcenote\" colspan=\"3\">Note: These metrics were computed from yellowfin tuna data of Somalia</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::",
    "supporting": [
      "estimate_stock_lbspr_yft_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}