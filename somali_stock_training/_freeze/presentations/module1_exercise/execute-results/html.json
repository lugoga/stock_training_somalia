{
  "hash": "bfca7721affb8b8de1c6c92e52a9dc44",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Module 1 Exercise: Exploring Somali Landing Site Data\"\nformat: html\neditor: visual\nexecute:\n  eval: true\n  echo: true\n  warning: false\n---\n\n\n\n## Introduction\n\nThis exercise uses the Somali landing site dataset (`lw`) to practice data exploration, identify data gaps and quality issues, and propose improvements. This is a crucial first step in any stock assessment.\n\n## Setup\n\nFirst, we need to load the necessary libraries and the dataset.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load required libraries\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(readxl)\nlibrary(gt)\n```\n:::\n\n\n\n## Load Data\n\nThe following code loads the length-weight dataset from the Excel file and performs some initial cleaning.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load the dataset\nlw_raw <- read_excel(\n  '../data_shared/ProjKalluun_master_data_entry.xlsx', \n  sheet = 'Section 3', \n  skip = 4\n)\n\n# Clean and prepare the data\nlw <- lw_raw |> \n  janitor::clean_names() |> \n  filter(!is.na(landing_site)) |> \n  mutate(\n    year = year(date_dd_mm_yy),\n    month = month(date_dd_mm_yy, label = TRUE),\n    day = day(date_dd_mm_yy), \n    .after = date_dd_mm_yy\n  ) |> \n  mutate(\n    weight_kg = as.numeric(weight_kg),\n    length_cm = as.numeric(length_cm)\n  )\n```\n:::\n\n\n\n## 1. Review the Data\n\nNow that the data is loaded into the `lw` object, let's start exploring it.\n\n#### Starter Code\n\nHere are a few commands to get you started.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get a glimpse of the data structure and column types\nglimpse(lw)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 3,571\nColumns: 19\n$ boat_id              <dbl> 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3…\n$ catch_id             <dbl> 1, 1, 1, 1, 1, 3, 7, 7, 7, 4, 4, 5, 5, 5, 9, 9, 9…\n$ fish_id              <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15…\n$ date_dd_mm_yy        <dttm> 2018-11-02, 2018-11-02, 2018-11-02, 2018-11-02, …\n$ year                 <dbl> 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2…\n$ month                <ord> Nov, Nov, Nov, Nov, Nov, Nov, Nov, Nov, Nov, Nov,…\n$ day                  <int> 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2…\n$ region               <chr> \"Mogadishu\", \"Mogadishu\", \"Mogadishu\", \"Mogadishu…\n$ landing_site         <chr> \"Lido Beach\", \"Lido Beach\", \"Lido Beach\", \"Lido B…\n$ vessel_id            <dbl> 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3…\n$ fish_type_code       <chr> \"YFT\", \"YFT\", \"YFT\", \"YFT\", \"YFT\", \"MAH\", \"OTH1\",…\n$ fish_index           <dbl> 1, 2, 3, 4, 5, 1, 1, 2, 3, 1, 2, 1, 2, 3, 1, 2, 3…\n$ weight_kg            <dbl> 7.7, 3.6, 4.5, 4.5, 3.2, 9.5, 2.3, 3.2, 2.3, 11.0…\n$ length_cm            <dbl> 76, 59, 65, 67, 61, 124, 55, 64, 55, 84, 85, 62, …\n$ fish_group           <chr> \"Tuna\", \"Tuna\", \"Tuna\", \"Tuna\", \"Tuna\", \"Other\", …\n$ notes                <chr> NA, NA, NA, NA, NA, NA, \"Aarjoog\", \"Aarjoog\", \"Aa…\n$ kobo_section_1_index <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ kobo_section_2_index <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n$ kobo_section_3_index <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Get a summary of the main numeric and categorical variables\nsummary(lw)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    boat_id         catch_id         fish_id      \n Min.   :  1.0   Min.   :   1.0   Min.   :   1.0  \n 1st Qu.: 79.0   1st Qu.: 300.0   1st Qu.: 893.5  \n Median :154.0   Median : 599.0   Median :1786.0  \n Mean   :157.2   Mean   : 591.4   Mean   :1786.0  \n 3rd Qu.:232.0   3rd Qu.: 873.0   3rd Qu.:2678.5  \n Max.   :318.0   Max.   :1138.0   Max.   :3571.0  \n                                                  \n date_dd_mm_yy                      year          month           day       \n Min.   :2018-11-02 00:00:00   Min.   :2018   Mar    : 403   Min.   : 1.00  \n 1st Qu.:2020-03-27 00:00:00   1st Qu.:2020   Oct    : 364   1st Qu.:21.00  \n Median :2020-11-16 00:00:00   Median :2020   Feb    : 346   Median :26.00  \n Mean   :2020-09-27 03:57:54   Mean   :2020   Apr    : 337   Mean   :22.71  \n 3rd Qu.:2021-04-30 00:00:00   3rd Qu.:2021   May    : 312   3rd Qu.:28.00  \n Max.   :2021-10-29 00:00:00   Max.   :2021   Jun    : 303   Max.   :31.00  \n                                              (Other):1506                  \n    region          landing_site         vessel_id     fish_type_code    \n Length:3571        Length:3571        Min.   :1.000   Length:3571       \n Class :character   Class :character   1st Qu.:1.000   Class :character  \n Mode  :character   Mode  :character   Median :2.000   Mode  :character  \n                                       Mean   :2.103                     \n                                       3rd Qu.:3.000                     \n                                       Max.   :5.000                     \n                                                                         \n   fish_index       weight_kg         length_cm       fish_group       \n Min.   : 1.000   Min.   :  0.200   Min.   :  1.90   Length:3571       \n 1st Qu.: 1.000   1st Qu.:  3.000   1st Qu.: 57.00   Class :character  \n Median : 2.000   Median :  4.000   Median : 71.00   Mode  :character  \n Mean   : 2.662   Mean   :  6.501   Mean   : 77.14                     \n 3rd Qu.: 4.000   3rd Qu.:  7.000   3rd Qu.: 85.00                     \n Max.   :10.000   Max.   :223.000   Max.   :348.00                     \n NA's   :2        NA's   :150       NA's   :45                         \n    notes           kobo_section_1_index kobo_section_2_index\n Length:3571        Mode:logical         Mode:logical        \n Class :character   NA's:3571            NA's:3571           \n Mode  :character                                            \n                                                             \n                                                             \n                                                             \n                                                             \n kobo_section_3_index\n Mode:logical        \n NA's:3571           \n                     \n                     \n                     \n                     \n                     \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# How many records per region?\nlw |> \n  count(region, sort = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 2\n  region        n\n  <chr>     <int>\n1 Berbera    1087\n2 Mogadishu   963\n3 Bosaso      927\n4 Kismayo     594\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# What are the most common species groups?\nlw |> \n  count(fish_group, sort = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 7 × 2\n  fish_group          n\n  <chr>           <int>\n1 Tuna             1652\n2 Other             884\n3 Shark             349\n4 Jacks             290\n5 Mackerel          219\n6 Billfish          125\n7 Rays and Skates    52\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlw |> \n  count(fish_group, region, sort = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 27 × 3\n   fish_group region        n\n   <chr>      <chr>     <int>\n 1 Tuna       Bosaso      573\n 2 Tuna       Berbera     568\n 3 Tuna       Mogadishu   451\n 4 Other      Berbera     345\n 5 Other      Kismayo     221\n 6 Shark      Kismayo     197\n 7 Other      Mogadishu   175\n 8 Other      Bosaso      143\n 9 Jacks      Bosaso      105\n10 Shark      Mogadishu   104\n# ℹ 17 more rows\n```\n\n\n:::\n:::\n\n\n\n**Task:** Explore the length, weight, and catch data available for your assigned region. What are the main species? What are the temporal and spatial trends?\n\n## 2. Identify Data Gaps\n\n**Task:** What information is missing from the dataset?\n\n-   Are there gaps in time (years, months)?\n-   Are certain species, gear types, or landing sites underrepresented?\n-   What other data types discussed in the presentation are not here?\n\n#### Visualize Data Gaps\n\nA tile plot is a great way to visualize the number of samples over time and quickly spot gaps.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlw |>\n  count(region, year, month) |>\n  ggplot(aes(x = year, y = month, fill = n)) +\n  geom_tile(color = \"white\") +\n  scale_fill_viridis_c(option = \"mako\", direction = -1, na.value = \"grey90\") +\n  facet_wrap(~region, ncol = 1) +\n  labs(\n    title = \"Data Availability by Region, Year, and Month\",\n    x = \"Year\",\n    y = \"Month\",\n    fill = \"Number of\\nRecords\"\n  ) +\n  theme_minimal() +\n  theme(strip.text = element_text(face = \"bold\"))\n```\n\n::: {.cell-output-display}\n![](module1_exercise_files/figure-html/visualize-gaps-1.png){width=672}\n:::\n:::\n\n\n\n## 3. Assess Data Quality\n\n**Task:** Look for potential data quality issues.\n\n-   Are there outliers in `length_cm` or `weight_kg`? (Hint: A scatter plot can be helpful here).\n-   Are there missing values (`NA`)? In which columns?\n-   Are there inconsistent entries (e.g., typos in species names or sites)?\n-   How might these issues affect a stock assessment?\n\n#### Visualize Outliers\n\nA scatter plot of weight vs. length is a powerful tool for identifying outliers. We expect a non-linear, exponential relationship ($W = aL^b$). Plotting on a log-log scale can make this relationship linear ($\\log(W) = \\log(a) + b\\log(L)$) and outliers easier to spot.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlw |>\n  filter(!is.na(length_cm), !is.na(weight_kg), weight_kg > 0, length_cm > 0) |> \n  ggplot(aes(x = length_cm, y = weight_kg)) +\n  geom_point(alpha = 0.4, aes(color = fish_group)) +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"black\", linetype = \"dashed\") +\n  scale_x_log10(labels = scales::label_number()) +\n  scale_y_log10(labels = scales::label_number()) +\n  facet_wrap(~region) +\n  labs(\n    title = \"Length-Weight Relationship by Region\",\n    subtitle = \"Log-log scale used to identify potential outliers\",\n    x = \"Length (cm, log scale)\",\n    y = \"Weight (kg, log scale)\",\n    color = \"Fish Group\"\n  ) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](module1_exercise_files/figure-html/visualize-outliers-1.png){width=672}\n:::\n:::\n\n\n\n## 4. Propose Improvements\n\n**Task:** Based on your review, suggest 2-3 practical steps to improve data collection for stock assessment in your region. Think about what is feasible in the Somali context.\n\n------------------------------------------------------------------------\n\n## Solution Guide\n\nThis section provides guidance and example solutions for the tasks in this exercise.\n\n### 1. Review the Data: Solution\n\nTo review the data for a specific region (e.g., \"Berbera\"), you can filter the dataset and then summarize it.\n\n**Code Example:**\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filter for a specific region\nberbera_data <- lw |> \n  filter(region == \"Berbera\")\n\n# What are the main species groups in Berbera?\nberbera_data |> \n  count(fish_group, sort = TRUE) |> \n  gt() |> \n  tab_header(title = \"Most Common Fish Groups in Berbera\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"sneesatmgf\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#sneesatmgf table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#sneesatmgf thead, #sneesatmgf tbody, #sneesatmgf tfoot, #sneesatmgf tr, #sneesatmgf td, #sneesatmgf th {\n  border-style: none;\n}\n\n#sneesatmgf p {\n  margin: 0;\n  padding: 0;\n}\n\n#sneesatmgf .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#sneesatmgf .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#sneesatmgf .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#sneesatmgf .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#sneesatmgf .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#sneesatmgf .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#sneesatmgf .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#sneesatmgf .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#sneesatmgf .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#sneesatmgf .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#sneesatmgf .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#sneesatmgf .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#sneesatmgf .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#sneesatmgf .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#sneesatmgf .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#sneesatmgf .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#sneesatmgf .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#sneesatmgf .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#sneesatmgf .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#sneesatmgf .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#sneesatmgf .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#sneesatmgf .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#sneesatmgf .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#sneesatmgf .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#sneesatmgf .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#sneesatmgf .gt_left {\n  text-align: left;\n}\n\n#sneesatmgf .gt_center {\n  text-align: center;\n}\n\n#sneesatmgf .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#sneesatmgf .gt_font_normal {\n  font-weight: normal;\n}\n\n#sneesatmgf .gt_font_bold {\n  font-weight: bold;\n}\n\n#sneesatmgf .gt_font_italic {\n  font-style: italic;\n}\n\n#sneesatmgf .gt_super {\n  font-size: 65%;\n}\n\n#sneesatmgf .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#sneesatmgf .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#sneesatmgf .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#sneesatmgf .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#sneesatmgf .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#sneesatmgf .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#sneesatmgf .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#sneesatmgf .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#sneesatmgf div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Most Common Fish Groups in Berbera</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"fish_group\">fish_group</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"n\">n</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"fish_group\" class=\"gt_row gt_left\">Tuna</td>\n<td headers=\"n\" class=\"gt_row gt_right\">568</td></tr>\n    <tr><td headers=\"fish_group\" class=\"gt_row gt_left\">Other</td>\n<td headers=\"n\" class=\"gt_row gt_right\">345</td></tr>\n    <tr><td headers=\"fish_group\" class=\"gt_row gt_left\">Mackerel</td>\n<td headers=\"n\" class=\"gt_row gt_right\">95</td></tr>\n    <tr><td headers=\"fish_group\" class=\"gt_row gt_left\">Jacks</td>\n<td headers=\"n\" class=\"gt_row gt_right\">66</td></tr>\n    <tr><td headers=\"fish_group\" class=\"gt_row gt_left\">Shark</td>\n<td headers=\"n\" class=\"gt_row gt_right\">11</td></tr>\n    <tr><td headers=\"fish_group\" class=\"gt_row gt_left\">Billfish</td>\n<td headers=\"n\" class=\"gt_row gt_right\">2</td></tr>\n  </tbody>\n  \n</table>\n</div>\n```\n\n:::\n\n```{.r .cell-code}\n# What is the temporal trend of data collection in Berbera?\nberbera_data |> \n  count(year) |> \n  ggplot(aes(x = year, y = n)) +\n  geom_line(group = 1) +\n  geom_point() +\n  labs(\n    title = \"Number of Records Over Time in Berbera\",\n    x = \"Year\",\n    y = \"Number of Records\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](module1_exercise_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n**Interpretation:**\n\n-   **Main Species:** For the Berbera region, \"Tuna\" is the most frequently recorded fish group, followed by \"Other\" and \"Shark\".\n-   **Temporal Trends:** Data collection in Berbera appears to have peaked around 2020-2021 and has since declined. There is very little data before 2019. This short time series makes it difficult to assess long-term trends.\n\n### 2. Identify Data Gaps: Solution\n\nThe visualization of data availability is key here.\n\n**Interpretation of the Tile Plot:**\n\n-   **Temporal Gaps:** The plot clearly shows that data collection is not consistent. For example, in Kismayo and Mogadishu, there are many months with no data (`grey` tiles), especially in 2019 and 2020. Even in Berbera, which has the most data, there are months with no records (e.g., late 2019).\n-   **Underrepresented Regions/Sites:** The `count(region)` command showed that Kismayo and Bosaso have significantly fewer records than Berbera and Mogadishu. We would need to investigate if this reflects lower fishing activity or just less data collection effort.\n-   **Missing Data Types:** The presentation mentioned four key data types.\n    -   **Catch Data:** We have counts of individual fish, but not total landings in weight for the entire fishery.\n    -   **Effort Data:** This is a major gap. We don't have data on the number of vessels, fishing days, or gear types used. This makes it impossible to calculate a reliable Catch Per Unit Effort (CPUE).\n    -   **Biological Data:** We have length and weight, but we are missing age, sex, and maturity data, which are crucial for more advanced assessments.\n    -   **Abundance Indices:** We can calculate a very basic index (records per site), but a proper index would require standardized effort data.\n\n### 3. Assess Data Quality: Solution\n\nThe log-log plot of weight vs. length is the primary tool for this task.\n\n**Interpretation of the Outlier Plot:**\n\n-   **Outliers:** The plot shows several points that fall far from the main cluster of data for each region. For example, in Berbera, there are fish with high lengths but surprisingly low weights, and vice-versa. These could be data entry errors (e.g., a decimal in the wrong place) or issues with measurement.\n\n-   **Missing Values:** Running `summary(lw)` shows `NA`s in `length_cm` and `weight_kg`. We need to understand why these are missing. Were they not measured, or was the data lost?\n\n\n\n    ::: {.cell}\n    \n    ```{.r .cell-code}\n    # Count missing values for key columns\n    lw |> \n      summarise(\n        missing_length = sum(is.na(length_cm)),\n        missing_weight = sum(is.na(weight_kg))\n      )\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    \n    ```\n    # A tibble: 1 × 2\n      missing_length missing_weight\n               <int>          <int>\n    1             45            150\n    ```\n    \n    \n    :::\n    :::\n\n\n\n-   **Inconsistent Entries:** Looking at `lw |> count(landing_site)` would likely reveal inconsistencies like \"Lido\", \"Lido Beach\", and \"lido beach\". These need to be standardized.\n\n**Impact on Assessment:**\n\n-   Outliers can heavily skew statistical estimates like mean length or the parameters of a length-weight relationship (`a` and `b`), leading to incorrect conclusions about stock health.\n-   Missing data reduces the amount of information available and can introduce bias if the missingness is not random. For example, if only large fish were weighed, our average weight would be overestimated.\n\n### 4. Propose Improvements: Solution\n\nBased on the review, here are three practical and feasible proposals.\n\n1.  **Standardize Data Entry with Digital Tools:**\n    -   **Problem:** Inconsistent names for landing sites and potential for typos.\n    -   **Solution:** Instead of paper forms, use a simple mobile data collection app (like KoboToolbox or ODK). This allows for dropdown menus for `region`, `landing_site`, and `fish_group`, which eliminates spelling errors. It also allows for setting validation rules (e.g., `weight_kg` cannot be negative) to prevent impossible values at the point of entry.\n2.  **Introduce Basic Effort Data Collection:**\n    -   **Problem:** We have no measure of fishing effort.\n    -   **Solution:** Add a simple field to the data collection form for enumerators to record the **\"number of active fishing vessels\"** at the landing site each day they collect data. This is a simple, low-cost proxy for effort. While not perfect, it allows for a much better CPUE calculation (e.g., catch per vessel-day) than what is currently possible.\n3.  **Implement a Two-Stage Quality Check:**\n    -   **Problem:** Outliers and errors are present in the dataset.\n    -   **Solution:**\n        1.  **Field-Level Check:** The data enumerator should review their own data at the end of each day for obvious mistakes.\n        2.  **Central-Level Check:** A data manager should run a script (like the outlier plot in this exercise) on a weekly or monthly basis to automatically flag suspicious data points. These can then be sent back to the enumerator for verification. This creates a feedback loop that improves data quality over time.",
    "supporting": [
      "module1_exercise_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}